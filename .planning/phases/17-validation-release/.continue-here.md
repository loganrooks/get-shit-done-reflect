---
phase: post-v1.14-audit
task: 0
total_tasks: 0
status: planning_needed
last_updated: 2026-02-12T02:09:29Z
---

<current_state>
v1.14 milestone audit PASSED on paper (29/29 requirements) but post-audit discussion revealed serious real-world gaps. Session was spent discussing gaps, questioning assumptions, and capturing signals. No gap-closing phase has been created yet. 5 signals captured to KB this session.
</current_state>

<completed_work>

- v1.14 milestone audit: PASSED (written to .planning/v1.14-MILESTONE-AUDIT.md)
- Gap analysis: original 5 gaps from audit identified (see previous .continue-here.md version in git)
- Capability matrix questioned: web search revealed Codex CLI may NOW have subagent support, Gemini CLI's is experimental/weaker than claimed. Matrix is stale and possibly wrong in both directions.
- 5 signals captured to ~/.gsd/knowledge/:
  1. sig-2026-02-11-agent-inline-research-context-bloat -- agent did inline research instead of delegating to subagent
  2. sig-2026-02-11-signal-workflow-context-bloat -- /gsd:signal loads ~864 lines of reference docs to record a signal
  3. sig-2026-02-11-local-install-global-kb-model -- user wants project-local install with global KB
  4. sig-2026-02-11-kb-script-wrong-location-and-path -- kb scripts in wrong dir, wrong path, wrong concept
  5. sig-2026-02-11-kb-data-loss-migration-gap -- 13 signals + 3 lessons from v1.13 LOST due to migration never running
</completed_work>

<remaining_work>

Before planning any gap-closing phase:

1. **Re-verify runtime capabilities** -- Capability matrix is stale. Codex may have subagents now. Gemini's are experimental. Need spike or fresh research to determine what each runtime actually supports TODAY. This changes the entire scope of gap-closing work.

2. **Resolve install model** -- User installs project-local (GSD in repo), not global (~/.claude/). KB stays global (~/.gsd/knowledge/). Current architecture assumes global install everywhere. This is fundamental.

3. **KB infrastructure fixes**:
   - kb-rebuild-index.sh and kb-create-dirs.sh should live at ~/.gsd/bin/ (with the KB, not in agents/)
   - Workflow references point to wrong paths
   - Migration code only lives in installer (single point of failure) -- need defensive migration

4. **Address data loss** -- 13 signals + 3 lessons from v1.13 are gone. Consider: how to prevent this class of failure (data migration depending on optional installer run, data outside git with no backup).

5. **Original 5 audit gaps** still need addressing (but scope may change after capability re-verification):
   - GAP 1: No gsd_version field in KB entries
   - GAP 2: Agent-spawning workflows break without task_tool (but 11 workflows affected, not just 3)
   - GAP 3: Spike/lesson templates missing provenance fields
   - GAP 4: KB management scripts absent/mislocated
   - GAP 5: Agent spec content inaccessible in non-Claude runtimes

6. **Signal workflow overhead** -- /gsd:signal loads ~864 lines of context. Needs lean mode or condensing.
</remaining_work>

<decisions_made>

- Capability matrix needs re-verification before gap planning (stale assumptions discovered)
- User's install model: project-local GSD + global KB at ~/.gsd/knowledge/
- KB management scripts should move to ~/.gsd/bin/ (not agents/)
- Data migration can't depend solely on installer execution
- Don't migrate old signals -- use read-time inference ("no gsd_version = pre-v1.14")
- The v1.14 audit passing 29/29 while missing these issues signals a gap in the audit process itself
</decisions_made>

<blockers>

- Lost KB data (13 signals, 3 lessons) is unrecoverable unless user has a backup of ~/.claude/gsd-knowledge/
- Capability matrix accuracy blocks gap-closing scope decisions
</blockers>

<context>
This session was a deep discussion, not execution. The user caught several assumptions that were baked into v1.14 work:
1. The capability matrix was never empirically verified (especially Codex task_tool: N)
2. The install model assumed global, but user installs locally
3. KB migration had no safety net

The user wants to think through these problems carefully from fresh context. The right next step is probably /gsd:plan-milestone-gaps with capability re-verification baked in as the first piece of work, OR a new milestone entirely since the scope has grown beyond "close 5 gaps."

Key user feedback: agent bloated context by doing research inline instead of delegating. Signal workflow is too expensive. Keep things lean.
</context>

<next_action>
Start fresh session. Decide whether to:
1. Run a spike to verify current runtime capabilities (Codex subagents, Gemini experimental sub-agents)
2. Use /gsd:plan-milestone-gaps to create gap-closing phases with capability re-verification as phase 1
3. Start a new milestone (v1.15?) since scope has grown significantly beyond original 5 gaps

The capability verification should happen BEFORE planning gap-closing work, since it determines which gaps are real.
</next_action>

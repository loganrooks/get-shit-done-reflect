---
phase: 22-agent-boilerplate-extraction
plan: 04
type: execute
wave: 2
depends_on: ["22-01"]
files_modified:
  - .claude/agents/gsd-plan-checker.md
  - .claude/agents/gsd-codebase-mapper.md
  - .claude/agents/gsd-research-synthesizer.md
  - .claude/agents/gsd-integration-checker.md
  - .claude/agents/gsd-roadmapper.md
  - .claude/agents/gsd-verifier.md
autonomous: true

must_haves:
  truths:
    - "All 6 remaining agent specs load agent-protocol.md via <required_reading>"
    - "gsd-plan-checker.md no longer contains inline quality degradation curve references"
    - "gsd-codebase-mapper.md forbidden_files content is in the protocol (agent may retain a reference)"
    - "Each agent retains its full identity and domain-specific methodology above the required_reading tag"
  artifacts:
    - path: ".claude/agents/gsd-plan-checker.md"
      provides: "Lean plan checker spec referencing shared protocol"
      contains: "<required_reading>"
    - path: ".claude/agents/gsd-codebase-mapper.md"
      provides: "Lean codebase mapper spec referencing shared protocol"
      contains: "<required_reading>"
    - path: ".claude/agents/gsd-research-synthesizer.md"
      provides: "Lean research synthesizer spec referencing shared protocol"
      contains: "<required_reading>"
    - path: ".claude/agents/gsd-integration-checker.md"
      provides: "Lean integration checker spec referencing shared protocol"
      contains: "<required_reading>"
    - path: ".claude/agents/gsd-roadmapper.md"
      provides: "Lean roadmapper spec referencing shared protocol"
      contains: "<required_reading>"
    - path: ".claude/agents/gsd-verifier.md"
      provides: "Lean verifier spec referencing shared protocol"
      contains: "<required_reading>"
  key_links:
    - from: ".claude/agents/gsd-plan-checker.md"
      to: ".claude/get-shit-done/references/agent-protocol.md"
      via: "<required_reading> tag"
      pattern: "required_reading"
    - from: ".claude/agents/gsd-codebase-mapper.md"
      to: ".claude/get-shit-done/references/agent-protocol.md"
      via: "<required_reading> tag"
      pattern: "required_reading"
---

<objective>
Extract shared operational content from the remaining 6 agent specs (plan-checker, codebase-mapper, research-synthesizer, integration-checker, roadmapper, verifier), replacing inline duplication with `<required_reading>` references.

Purpose: Complete the extraction across all 11 agents. These 6 agents have less operational duplication than the 5 heavy agents (Plans 02-03), but each benefits from the protocol reference for consistency and future-proofing. After this plan, ALL 11 agents reference the shared protocol.

Output: Six leaner agent specs, each with `<required_reading>` reference to agent-protocol.md
</objective>

<execution_context>
@/Users/rookslog/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rookslog/.claude/get-shit-done/templates/summary-standard.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-agent-boilerplate-extraction/22-CONTEXT.md
@.planning/phases/22-agent-boilerplate-extraction/22-EXTRACTION-REGISTRY.md

Protocol reference:
@.claude/get-shit-done/references/agent-protocol.md

Agents to edit:
@.claude/agents/gsd-plan-checker.md
@.claude/agents/gsd-codebase-mapper.md
@.claude/agents/gsd-research-synthesizer.md
@.claude/agents/gsd-integration-checker.md
@.claude/agents/gsd-roadmapper.md
@.claude/agents/gsd-verifier.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract from plan-checker, codebase-mapper, and research-synthesizer</name>
  <files>.claude/agents/gsd-plan-checker.md, .claude/agents/gsd-codebase-mapper.md, .claude/agents/gsd-research-synthesizer.md</files>
  <action>
Edit these 3 agents to add `<required_reading>` references and remove any content now in the shared protocol.

**gsd-plan-checker.md (622 lines):**
- REMOVE: Any inline quality degradation curve reference or table (protocol Section 11 now covers this). The plan-checker references the same context budget table as the planner.
- REMOVE: gsd-tools.js init pattern if duplicated as boilerplate (keep the specific subcommand invocation in execution_flow).
- KEEP: All checker-specific methodology (dimension scoring, requirement coverage analysis, scope sanity checks, structural validation rules, pass/fail criteria, scoring rubric). This is 95%+ of the agent — it's domain methodology.
- ADD `<required_reading>` after all checker-specific methodology, before `<execution_flow>`:
  ```markdown
  <required_reading>
  @./.claude/get-shit-done/references/agent-protocol.md
  </required_reading>
  ```

**gsd-codebase-mapper.md (761 lines):**
- REMOVE: `forbidden_files` content if it duplicates what's now in the protocol. Note: the codebase-mapper may have the MOST DETAILED forbidden_files rules. If the protocol's version is sourced from this agent, the agent can remove its inline version entirely.
- KEEP: All mapping methodology (exploration patterns, analysis structure, output formats, mapping strategy). This is the vast majority of the agent.
- ADD `<required_reading>` after domain methodology, before `<execution_flow>`:
  ```markdown
  <required_reading>
  @./.claude/get-shit-done/references/agent-protocol.md
  </required_reading>
  ```

**gsd-research-synthesizer.md (236 lines):**
- REMOVE: gsd-tools.js commit pattern if present as boilerplate. This is the smallest agent; likely very little to extract.
- KEEP: All synthesis methodology (merge strategies, conflict resolution, output format). This agent is almost entirely domain-specific.
- ADD `<required_reading>` after domain methodology, before `<execution_flow>` (or before `<structured_returns>` if no execution_flow section):
  ```markdown
  <required_reading>
  @./.claude/get-shit-done/references/agent-protocol.md
  </required_reading>
  ```

For each agent, verify the `<required_reading>` tag is positioned so agent-specific content appears ABOVE it.
  </action>
  <verify>
1. `grep -c "required_reading" .claude/agents/gsd-plan-checker.md` returns 2
2. `grep -c "required_reading" .claude/agents/gsd-codebase-mapper.md` returns 2
3. `grep -c "required_reading" .claude/agents/gsd-research-synthesizer.md` returns 2
4. `grep -c "role" .claude/agents/gsd-plan-checker.md` returns at least 1 (identity retained)
5. `grep -c "role" .claude/agents/gsd-codebase-mapper.md` returns at least 1 (identity retained)
6. `grep -c "role" .claude/agents/gsd-research-synthesizer.md` returns at least 1 (identity retained)
  </verify>
  <done>gsd-plan-checker.md, gsd-codebase-mapper.md, and gsd-research-synthesizer.md all reference shared protocol, duplicated operational content removed, domain methodology retained.</done>
</task>

<task type="auto">
  <name>Task 2: Extract from integration-checker, roadmapper, and verifier</name>
  <files>.claude/agents/gsd-integration-checker.md, .claude/agents/gsd-roadmapper.md, .claude/agents/gsd-verifier.md</files>
  <action>
Edit these 3 agents to add `<required_reading>` references and remove any content now in the shared protocol.

**gsd-integration-checker.md (423 lines):**
- REMOVE: Any structured return pattern boilerplate that duplicates protocol Section 12 conventions (e.g., generic "use ## STATUS KEYWORD" guidance). Keep the integration-checker-specific return format.
- KEEP: All integration checking methodology (cross-phase verification, wiring checks, regression detection). Almost entirely domain-specific.
- ADD `<required_reading>` after domain methodology, before `<execution_flow>`:
  ```markdown
  <required_reading>
  @./.claude/get-shit-done/references/agent-protocol.md
  </required_reading>
  ```

**gsd-roadmapper.md (605 lines):**
- REMOVE: Any "Solo Developer + Claude" philosophy content that is now in the protocol as a shared convention. HOWEVER — per the CONTEXT.md decision, philosophy sections are identity and STAY. If the roadmapper's philosophy has unique framing (likely "Anti-Enterprise patterns"), keep the whole section. Only remove if there's operational content (git safety, commit patterns) duplicated.
- KEEP: All roadmap methodology (phase decomposition, dependency analysis, requirement derivation, roadmap format). This is domain-specific.
- ADD `<required_reading>` after domain methodology, before `<execution_flow>`:
  ```markdown
  <required_reading>
  @./.claude/get-shit-done/references/agent-protocol.md
  </required_reading>
  ```

**gsd-verifier.md (523 lines):**
- REMOVE: gsd-tools.js verify command patterns if they duplicate the generic gsd-tools pattern from protocol Section 7. Keep the specific verify subcommands since those are verifier-specific.
- KEEP: All verification methodology (must_haves checking, truth verification, artifact validation, key link verification, gap analysis). This is domain-specific.
- ADD `<required_reading>` after domain methodology, before `<execution_flow>`:
  ```markdown
  <required_reading>
  @./.claude/get-shit-done/references/agent-protocol.md
  </required_reading>
  ```

For each agent, verify the `<required_reading>` tag is positioned so agent-specific content appears ABOVE it.
  </action>
  <verify>
1. `grep -c "required_reading" .claude/agents/gsd-integration-checker.md` returns 2
2. `grep -c "required_reading" .claude/agents/gsd-roadmapper.md` returns 2
3. `grep -c "required_reading" .claude/agents/gsd-verifier.md` returns 2
4. `grep -c "role" .claude/agents/gsd-integration-checker.md` returns at least 1 (identity retained)
5. `grep -c "role" .claude/agents/gsd-roadmapper.md` returns at least 1 (identity retained)
6. `grep -c "role" .claude/agents/gsd-verifier.md` returns at least 1 (identity retained)
  </verify>
  <done>gsd-integration-checker.md, gsd-roadmapper.md, and gsd-verifier.md all reference shared protocol, any duplicated operational content removed, all domain methodology retained above protocol reference.</done>
</task>

</tasks>

<verification>
- [ ] All 6 agents contain `<required_reading>` referencing agent-protocol.md
- [ ] Combined with Plans 02-03, ALL 11 agents now reference the shared protocol
- [ ] Each agent retains its domain-specific methodology and identity sections
- [ ] Agent-specific content appears ABOVE the required_reading tag in all specs
- [ ] No agent lost content that isn't covered by the shared protocol
</verification>

<success_criteria>
All 6 remaining agents reference the shared protocol via `<required_reading>`. Combined with Plans 02 and 03, all 11 GSD agents now load the shared protocol. Every agent retains its identity and domain-specific methodology.
</success_criteria>

<output>
After completion, create `.planning/phases/22-agent-boilerplate-extraction/22-04-SUMMARY.md`
</output>

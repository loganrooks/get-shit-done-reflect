---
phase: 34-signal-plan-linkage
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - agents/knowledge-store.md
  - get-shit-done/feature-manifest.json
autonomous: true

must_haves:
  truths:
    - "PLAN.md frontmatter can include a resolves_signals array of signal IDs without validation errors"
    - "Feature manifest defines verification_window setting with default of 3 phases"
    - "knowledge-store.md documents resolves_signals as a plan schema extension and verification_window as a lifecycle config"
  artifacts:
    - path: "agents/knowledge-store.md"
      provides: "Documentation of resolves_signals plan field and verification_window config"
      contains: "resolves_signals"
    - path: "get-shit-done/feature-manifest.json"
      provides: "verification_window setting in signal_lifecycle schema"
      contains: "verification_window"
  key_links:
    - from: "get-shit-done/feature-manifest.json"
      to: "agents/knowledge-store.md"
      via: "verification_window config referenced in lifecycle documentation"
      pattern: "verification_window"
---

<objective>
Add resolves_signals plan field documentation and verification_window lifecycle config

Purpose: Establish the schema foundation so that plans can declare which signals they resolve and the synthesizer knows how many phases to wait before marking signals as verified. These are the building blocks for the lifecycle transitions in Plans 02 and 03.
Output: Updated knowledge-store.md with resolves_signals documentation, feature-manifest.json with verification_window setting
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary-standard.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@agents/knowledge-store.md
@get-shit-done/feature-manifest.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Document resolves_signals plan field and verification_window in knowledge-store.md</name>
  <files>agents/knowledge-store.md</files>
  <action>
Add documentation to knowledge-store.md for two new concepts:

1. **resolves_signals in PLAN.md frontmatter** -- Add a subsection (in or near the plan schema / lifecycle documentation area) documenting:
   - `resolves_signals` is an optional array field in PLAN.md frontmatter
   - Contains signal IDs (format: `sig-YYYY-MM-DD-slug`) that the plan's tasks address
   - The planner recommends signal IDs based on active triaged signals with `triage.decision: address`
   - Example YAML showing resolves_signals in plan frontmatter
   - When execution completes, referenced signals transition to `remediated` status
   - Non-existent signal IDs produce warnings, not errors (signals may be archived between planning and execution)

2. **verification_window lifecycle config** -- Add documentation for the passive verification-by-absence mechanism:
   - After remediation, if no recurrence is detected within N phases (configurable, default 3), the signal moves to `verified`
   - `verification_window` is configured in the project's signal_lifecycle settings
   - The synthesizer performs this check during signal collection runs
   - Document the lifecycle transition: remediated -> verified (by absence of recurrence)

Also add documentation for **recurrence detection**:
   - When a new signal matches a remediated/verified signal (same signal_type + 2+ overlapping tags), it is a recurrence
   - Recurrence sets `recurrence_of` on the new signal to the matched signal's ID
   - The matched signal regresses: lifecycle_state returns to `detected`
   - Recurrence escalation (configurable): severity increases one tier on recurrence

Do NOT modify frozen/mutable field lists -- those are already correct from Phase 31. Only add documentation for the new plan-signal linkage mechanism and verification/recurrence behavior.

Note: gsd-tools.js is an upstream file and MUST NOT be modified per project conventions. The FRONTMATTER_SCHEMAS.plan schema only validates required fields and does not reject unknown fields, so resolves_signals works without code changes.
  </action>
  <verify>
grep -c "resolves_signals" agents/knowledge-store.md | grep -v "^0$"
grep -c "verification_window" agents/knowledge-store.md | grep -v "^0$"
grep -c "recurrence_of" agents/knowledge-store.md | grep -v "^0$"
  </verify>
  <done>knowledge-store.md documents resolves_signals, verification_window, and recurrence detection as part of the signal lifecycle specification</done>
</task>

<task type="auto">
  <name>Task 2: Add verification_window to feature manifest signal_lifecycle schema</name>
  <files>get-shit-done/feature-manifest.json</files>
  <action>
Add a `verification_window` field to the existing `signal_lifecycle.schema` section in feature-manifest.json:

```json
"verification_window": {
  "type": "number",
  "default": 3,
  "min": 1,
  "max": 10,
  "description": "Number of phases with no recurrence before a remediated signal is verified"
}
```

Insert this after the existing `recurrence_escalation` field in the signal_lifecycle schema. Maintain valid JSON formatting. Do not modify any other feature sections.
  </action>
  <verify>
node -e "const m = require('./get-shit-done/feature-manifest.json'); console.log(JSON.stringify(m.features.signal_lifecycle.schema.verification_window))" | grep '"default":3'
  </verify>
  <done>feature-manifest.json contains verification_window setting with type number, default 3, min 1, max 10</done>
</task>

</tasks>

<verification>
- [ ] knowledge-store.md contains resolves_signals documentation
- [ ] knowledge-store.md contains verification_window documentation
- [ ] knowledge-store.md contains recurrence detection documentation
- [ ] feature-manifest.json parses as valid JSON
- [ ] feature-manifest.json signal_lifecycle.schema.verification_window exists with default 3
- [ ] No modifications to gsd-tools.js
</verification>

<success_criteria>
The schema foundation for signal-plan linkage is documented and configured: resolves_signals is a recognized plan field, verification_window is configurable, and recurrence/verification behavior is specified.
</success_criteria>

<output>
After completion, create `.planning/phases/34-signal-plan-linkage/34-01-SUMMARY.md`
</output>

---
phase: 08-core-merge
plan: 03
type: execute
wave: 3
depends_on: [08-02]
files_modified:
  - README.md
  - CHANGELOG.md
  - hooks/gsd-check-update.js
  - .gitignore
  - get-shit-done/templates/research.md
  - get-shit-done/references/planning-config.md
  - commands/gsd/update.md
  - commands/gsd/help.md
  - package-lock.json
autonomous: false

must_haves:
  truths:
    - "All fork-wins files (README.md, CHANGELOG.md, hooks/gsd-check-update.js) are resolved with fork's version via git checkout --ours"
    - "All MEDIUM-risk files (planning-config.md, update.md, help.md) are resolved preserving fork content while adopting upstream additions where appropriate"
    - "All LOW-risk case-by-case files (.gitignore, research.md) are resolved combining both sides' additions"
    - "package-lock.json conflict is cleared (accept ours -- will be regenerated in Plan 08-04)"
    - "Zero unresolved conflicts remain -- the merge is ready to be committed"
  artifacts:
    - path: "README.md"
      provides: "Fork's complete README (fork wins)"
    - path: "CHANGELOG.md"
      provides: "Fork's changelog (fork wins)"
    - path: "commands/gsd/help.md"
      provides: "Fork's help command with fork branding"
      contains: "get-shit-done-reflect-cc"
    - path: "commands/gsd/update.md"
      provides: "Fork's update command with fork package refs"
      contains: "get-shit-done-reflect-cc"
    - path: "get-shit-done/references/planning-config.md"
      provides: "Config reference with fork knowledge settings + upstream gsd-tools references"
  key_links:
    - from: "commands/gsd/help.md"
      to: "fork branding"
      via: "all package references use fork name"
      pattern: "get-shit-done-reflect-cc"
    - from: "commands/gsd/update.md"
      to: "fork branding"
      via: "all package references use fork name"
      pattern: "get-shit-done-reflect-cc"
---

<objective>
Resolve all remaining merge conflicts: 3 fork-wins files (auto-resolve), 2 LOW-risk case-by-case files, 3 MEDIUM-risk files, and package-lock.json. After this plan, zero unresolved conflicts remain and the merge is ready to be committed in Plan 08-04.

Purpose: Clear all remaining conflicts so the merge state can be finalized. Fork-wins and LOW-risk files are handled quickly. MEDIUM-risk files get interactive review because they involve the thin orchestrator decision and fork content preservation.

Output: All conflicts resolved and staged. Repo is in merge state with "all conflicts fixed" ready for `git commit`.
</objective>

<execution_context>
@/Users/rookslog/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rookslog/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/FORK-STRATEGY.md
@.planning/FORK-DIVERGENCES.md
@.planning/phases/08-core-merge/08-RESEARCH.md
@.planning/phases/08-core-merge/08-CONTEXT.md
@.planning/phases/08-core-merge/08-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Auto-resolve fork-wins files, LOW-risk files, and package-lock.json</name>
  <files>README.md, CHANGELOG.md, hooks/gsd-check-update.js, .gitignore, get-shit-done/templates/research.md, package-lock.json</files>
  <action>
Resolve the straightforward conflicts first. This clears the simple files so Task 2 can focus entirely on the MEDIUM-risk interactive resolutions.

**Step 1: Fork-wins files (silent auto-resolve)**

These files are fully owned by the fork. Upstream changes are discarded per FORK-DIVERGENCES.md merge stance.

```bash
git checkout --ours README.md
git checkout --ours CHANGELOG.md
git checkout --ours hooks/gsd-check-update.js
git add README.md CHANGELOG.md hooks/gsd-check-update.js
```

Note: Content updates to README.md and CHANGELOG.md reflecting newly adopted upstream features are deferred to Phase 12 (Release). Phase 8 just preserves the fork's current versions.

**Step 2: .gitignore (LOW-risk, combine both)**

Read the conflicted `.gitignore`. Resolution: keep BOTH sides' additions. The fork added benchmark result exclusions. Upstream added `reports/` and `RAILROAD_ARCHITECTURE.md`. These are purely additive and compatible.

- Read the conflict markers
- Produce a combined version with all entries from both sides
- Write the resolved file
- `git add .gitignore`

If the conflict is trivial (non-overlapping additions), just combine them. If there's a genuine conflict in existing lines, present it briefly.

**Step 3: research.md (LOW-risk, case-by-case)**

Read the conflicted `get-shit-done/templates/research.md`. The fork enhanced the `open_questions` section with resolved/gaps/spike/still-open structure. Upstream added a `user_constraints` section.

Resolution approach:
- Keep the fork's enhanced `open_questions` structure
- Adopt upstream's `user_constraints` section (it's a new section, additive)
- Read both sides and combine

If the changes are clearly additive (different sections), combine silently. If there's a genuine overlap, show the user briefly.

- Write the resolved file
- `git add get-shit-done/templates/research.md`

**Step 4: package-lock.json (clear the conflict)**

The lockfile cannot be meaningfully merged. Clear it now; it will be regenerated via `npm install` in Plan 08-04 after all conflicts are resolved.

```bash
git checkout --ours package-lock.json
git add package-lock.json
```

**Step 5: Check remaining conflicts**

```bash
git diff --name-only --diff-filter=U
```

This should show only the 3 MEDIUM-risk files remaining:
- `commands/gsd/help.md`
- `commands/gsd/update.md`
- `get-shit-done/references/planning-config.md`

If any unexpected files remain, investigate and resolve or flag.
  </action>
  <verify>
`git diff --name-only --diff-filter=U` shows only the 3 MEDIUM-risk files (or fewer). Fork-wins files have no conflict markers: `grep "<<<<<<<" README.md CHANGELOG.md hooks/gsd-check-update.js` returns nothing. `.gitignore` contains both fork and upstream additions. `get-shit-done/templates/research.md` has both fork's open_questions structure and upstream's user_constraints section. `package-lock.json` has no conflict markers.
  </verify>
  <done>Fork-wins files, LOW-risk files, and package-lock.json are all resolved and staged. Only MEDIUM-risk files remain for interactive review.</done>
</task>

<task type="interactive">
  <name>Task 2: Resolve MEDIUM-risk files with interactive review</name>
  <files>get-shit-done/references/planning-config.md, commands/gsd/update.md, commands/gsd/help.md</files>
  <action>
Resolve the 3 MEDIUM-risk files one at a time. Each gets a diff + rationale checkpoint. These files share a common challenge: upstream converted them to reference gsd-tools CLI patterns (planning-config.md) or thin orchestrator stubs (update.md, help.md), while the fork has customized inline content.

**File 1: get-shit-done/references/planning-config.md (hybrid merge)**

1. Read the conflicted file. The fork added `knowledge_debug` config and `knowledge_surfacing_config` section. Upstream added gsd-tools CLI references replacing bash patterns.

2. Resolution: Combine both. Keep fork's knowledge-related config additions. Adopt upstream's gsd-tools CLI references (they're the current way to interact with config). If there's a structural conflict (e.g., both rewrote the same section), fork knowledge features take priority while adopting upstream's newer patterns where they don't conflict.

3. Write resolved file. `git add get-shit-done/references/planning-config.md`

4. **CHECKPOINT:** Show diff + rationale. What fork content was kept, what upstream content was adopted, why.
   Wait for approval.

**File 2: commands/gsd/update.md (keep fork inline version)**

1. Read the conflicted file. Upstream shrank from 172 to 37 lines (thin orchestrator). Fork has 48-line version with package name refs changed to `get-shit-done-reflect-cc`.

2. Resolution approach -- evaluate both versions:
   - Upstream's thin orchestrator delegates to `workflows/update.md`. The fork has not customized this workflow file yet.
   - The fork's version is a relatively small modification (package name refs) of the original upstream inline version.
   - **Decision depends on content:** If the fork's version is close to the original upstream inline version (just package name changes), AND upstream's workflow file would work with fork package names, consider taking upstream's thin version -- BUT only if changing the workflow file's package refs is trivial. Otherwise, keep the fork's inline version and migrate in Phase 9.
   - The safer option is keeping the fork's inline version with package name refs intact. Phase 9 handles migration.

3. Write resolved file. `git add commands/gsd/update.md`

4. **CHECKPOINT:** Show the user both options (fork inline vs upstream thin) with size comparison and rationale. Explain Phase 9 migration path. Wait for approval.

**File 3: commands/gsd/help.md (keep fork inline version)**

1. Read the conflicted file. Upstream shrank from 481 to 22 lines (thin orchestrator). Fork has 46-line version with package name refs and a GSD Reflect section.

2. Resolution approach -- same pattern as update.md:
   - Upstream's thin orchestrator delegates to `workflows/help.md`
   - Fork has package name refs and a GSD Reflect section added
   - Keep the fork's inline version -- it contains fork-specific content (GSD Reflect commands section) that doesn't exist in upstream's workflow file
   - Phase 9 migrates to thin orchestrator with fork customizations

3. Write resolved file. `git add commands/gsd/help.md`

4. **CHECKPOINT:** Show diff + rationale. Highlight the GSD Reflect section that would be lost if upstream's thin version was accepted. Wait for approval.

**After all 3 files are resolved:**

```bash
# Verify zero conflicts remain
git diff --name-only --diff-filter=U
```

This should return empty (no unresolved conflicts). If any remain, investigate and resolve.

```bash
# Verify merge state
git status
```

Should show "All conflicts fixed but you are still merging" or similar.

**Post-resolution package name sweep:**

```bash
# Check all resolved files for upstream package name leaks
grep -r "get-shit-done-cc" commands/gsd/help.md commands/gsd/update.md get-shit-done/references/planning-config.md | grep -v "reflect"
```

Should return nothing. If it finds upstream names, fix them.
  </action>
  <verify>
`git diff --name-only --diff-filter=U` returns empty (zero unresolved conflicts). `grep "<<<<<<<" commands/gsd/help.md commands/gsd/update.md get-shit-done/references/planning-config.md` returns nothing. `grep "get-shit-done-reflect-cc" commands/gsd/help.md commands/gsd/update.md` finds fork package name. `grep "knowledge_debug\|knowledge_surfacing" get-shit-done/references/planning-config.md` finds fork config additions. `git status` shows all conflicts resolved (merge ready to commit).
  </verify>
  <done>All MEDIUM-risk files resolved with user approval. Zero unresolved conflicts remain. The merge is ready to be committed in Plan 08-04.</done>
</task>

</tasks>

<verification>
1. `git diff --name-only --diff-filter=U` returns empty (all conflicts resolved)
2. `git status` shows "All conflicts fixed but you are still merging" (merge ready to commit)
3. `grep -r "get-shit-done-cc" README.md CHANGELOG.md package.json bin/install.js commands/gsd/help.md commands/gsd/update.md commands/gsd/new-project.md | grep -v "reflect"` returns nothing (no upstream name leaks)
4. Fork-wins files contain fork content: `grep "GSD Reflect" README.md` succeeds
5. Command files retain inline logic: `wc -l commands/gsd/help.md commands/gsd/update.md` shows 40+ lines each (not upstream stubs)
6. All 3 MEDIUM-risk files individually reviewed and approved by user
</verification>

<success_criteria>
- Fork-wins files (README.md, CHANGELOG.md, gsd-check-update.js) resolved silently with fork version
- LOW-risk files (.gitignore, research.md) resolved combining both sides' additions
- MEDIUM-risk files (planning-config.md, update.md, help.md) resolved with user approval preserving fork content
- package-lock.json conflict cleared (ours accepted, regeneration in Plan 08-04)
- Zero unresolved conflicts remain -- `git diff --name-only --diff-filter=U` returns empty
- No upstream package names leaked into any resolved file
</success_criteria>

<output>
After completion, create `.planning/phases/08-core-merge/08-03-SUMMARY.md`
</output>

---
phase: 30-signal-driven-workflow-fixes
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - get-shit-done/workflows/run-spike.md
autonomous: true

must_haves:
  truths:
    - "spike workflow checks for existing RESEARCH.md artifacts before proceeding with advisory"
    - "spike DESIGN.md template includes a Prerequisites/Feasibility section"
  artifacts:
    - path: "get-shit-done/workflows/run-spike.md"
      provides: "RESEARCH.md artifact check in research-first advisory"
      contains: "RESEARCH.md"
    - path: ".claude/agents/kb-templates/spike-design.md"
      provides: "Prerequisites / Feasibility section"
      contains: "Prerequisites / Feasibility"
  key_links:
    - from: "get-shit-done/workflows/run-spike.md"
      to: ".planning/phases/*-RESEARCH.md"
      via: "artifact check before question classification"
      pattern: "RESEARCH.md"
---

<objective>
Close spike-related signals by verifying existing implementations and enhancing the research-first advisory with an artifact check.

Purpose: Two open signals (sig-2026-02-11-premature-spiking-no-research-gate, sig-2026-02-11-spike-design-missing-feasibility) were recorded before Phase 21 (v1.14) implemented the research-first advisory and feasibility template section. The advisory exists but does not check for pre-existing RESEARCH.md artifacts. SC4 requires "checks whether research was already done" -- a small enhancement adds this artifact check. SC5 is already fully satisfied.

Output: Enhanced run-spike.md with RESEARCH.md artifact check; verified spike-design.md (no changes needed).
</objective>

<execution_context>
@/Users/rookslog/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rookslog/.claude/get-shit-done/templates/summary-standard.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-signal-driven-workflow-fixes/30-RESEARCH.md

@get-shit-done/workflows/run-spike.md
@.claude/agents/kb-templates/spike-design.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance run-spike.md research-first advisory with RESEARCH.md artifact check</name>
  <files>
    get-shit-done/workflows/run-spike.md
  </files>
  <action>
    The existing "Research-First Advisory" at step 2 (lines 43-85) classifies questions as research-suitable vs spike-suitable based on question patterns, but does not check whether research has already been conducted. SC4 requires "checks whether research was already done before proceeding."

    Add a RESEARCH.md artifact check at the BEGINNING of section "### 2. Research-First Advisory" (after line 45 "Before creating a workspace or drafting DESIGN.md, assess whether the question is better suited to research or experimentation."), BEFORE the "Research indicators" list. Insert:

    ```markdown
    **Check for existing research:**

    ```bash
    # If phase-linked, check for existing research artifacts
    if [ "$PHASE" != "project-level" ]; then
      EXISTING_RESEARCH=$(ls .planning/phases/${PHASE}-*/*-RESEARCH.md 2>/dev/null)
      if [ -n "$EXISTING_RESEARCH" ]; then
        echo "Note: Research already exists for this phase: $EXISTING_RESEARCH"
        echo "Review existing research before spiking -- the answer may already be there."
      fi
    fi
    ```

    If existing research is found for the linked phase, surface this to the user as additional context in the advisory. This does NOT block the spike -- it adds information to help the user make a better decision.

    ```

    This enhancement adds a concrete artifact check ("was research already done?") to complement the existing question-type classification ("is this a research question?"). Together they fully satisfy SC4: the advisory both checks for existing research AND classifies the question type.

    Do NOT modify the existing research indicators, spike indicators, or the interactive/yolo branching logic. The artifact check is additive-only, inserted before the classification logic.
  </action>
  <verify>
    1. `grep -n "EXISTING_RESEARCH" get-shit-done/workflows/run-spike.md` returns matches showing the artifact check
    2. `grep -n "Research already exists" get-shit-done/workflows/run-spike.md` returns a match showing the user advisory
    3. The artifact check appears BEFORE the "Research indicators" list in section 2
    4. The existing research indicators, spike indicators, and mode branching logic are unchanged
    5. The file still has valid workflow structure
  </verify>
  <done>
    run-spike.md section 2 now checks for existing RESEARCH.md artifacts in the linked phase directory before proceeding with question classification. If research exists, it surfaces a note to the user. The existing advisory logic (question classification, interactive/yolo branching) is preserved unchanged.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify spike-design.md feasibility section and close signals</name>
  <files>
    .claude/agents/kb-templates/spike-design.md
  </files>
  <action>
    **Verify SC5:** Read `.claude/agents/kb-templates/spike-design.md` and confirm the "Prerequisites / Feasibility" section exists (expected at lines 42-55). Verify it contains:
    - Environment requirements list
    - Feasibility checklist with checkboxes
    - "If prerequisites NOT met" guidance

    Expected content (already present from Phase 21):
    ```markdown
    ## Prerequisites / Feasibility

    **Environment requirements:**
    - {API keys, credentials, or accounts needed -- or "None"}
    - {CLI tools or software to install -- or "None"}
    - {Network access, service availability, hardware -- or "Standard dev environment"}

    **Feasibility checklist:**
    - [ ] All prerequisites available or obtainable within spike timeframe
    - [ ] Experiments can run in spike workspace isolation (no main project modification)
    - [ ] No production systems, data, or credentials at risk

    **If prerequisites NOT met:**
    {Action: defer spike until prerequisites available / adjust experiments to work within constraints / document blocker and checkpoint}
    ```

    If the section exists with this content, SC5 is confirmed satisfied. No edits needed -- spike-design.md is already correct.

    **Signal closure verification:** Confirm both spike signals are now resolved:
    - sig-2026-02-11-premature-spiking-no-research-gate: Resolved by existing advisory (Phase 21) + RESEARCH.md artifact check (Task 1)
    - sig-2026-02-11-spike-design-missing-feasibility: Resolved by existing Prerequisites/Feasibility section (Phase 21)

    Report the verification results in the SUMMARY.md.
  </action>
  <verify>
    1. `grep -n "Prerequisites / Feasibility" .claude/agents/kb-templates/spike-design.md` returns a match
    2. `grep -n "Feasibility checklist" .claude/agents/kb-templates/spike-design.md` returns a match
    3. `grep -n "prerequisites NOT met" .claude/agents/kb-templates/spike-design.md` returns a match
    4. The section contains environment requirements, feasibility checklist, and remediation guidance
  </verify>
  <done>
    spike-design.md confirmed to contain Prerequisites/Feasibility section with environment requirements, feasibility checklist, and remediation guidance. SC5 fully satisfied by existing content (no edits needed). Both spike-related signals verified as resolved.
  </done>
</task>

</tasks>

<verification>
1. run-spike.md section 2 contains RESEARCH.md artifact check before question classification
2. spike-design.md contains Prerequisites/Feasibility section (unchanged, already present)
3. All existing advisory logic in run-spike.md preserved (no regressions)
4. Both spike-related signals confirmed resolved
</verification>

<success_criteria>
SC4: run-spike.md includes a research-first advisory gate that checks whether research was already done (RESEARCH.md artifact check) AND classifies question type (existing logic)
SC5: spike-design.md template includes a feasibility/prerequisites section (confirmed present, no changes needed)
</success_criteria>

<output>
After completion, create `.planning/phases/30-signal-driven-workflow-fixes/30-02-SUMMARY.md`
</output>

---
phase: 03-spike-runner
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/agents/kb-templates/spike-design.md
  - .claude/agents/kb-templates/spike-decision.md
autonomous: true

must_haves:
  truths:
    - "A DESIGN.md template exists with hypothesis, success criteria, and experiment plan structure"
    - "A DECISION.md template exists with mandatory decision field and ADR-influenced structure"
    - "Templates follow the established kb-templates pattern from Phase 1"
  artifacts:
    - path: ".claude/agents/kb-templates/spike-design.md"
      provides: "Template for spike DESIGN.md files in spike workspaces"
      contains: "Question, Type, Hypothesis, Success Criteria, Experiment Plan, Scope Boundaries"
    - path: ".claude/agents/kb-templates/spike-decision.md"
      provides: "Template for spike DECISION.md files (ADR-style)"
      contains: "Question, Answer, Summary, Findings, Analysis, Decision, Implications, Metadata"
  key_links:
    - from: ".claude/agents/kb-templates/spike-design.md"
      to: "get-shit-done/references/spike-execution.md"
      via: "Schema alignment"
      pattern: "spike types|success criteria|experiment plan"
    - from: ".claude/agents/kb-templates/spike-decision.md"
      to: ".claude/agents/knowledge-store.md"
      via: "Body template alignment with spike body template"
      pattern: "Hypothesis|Decision|Consequences"
---

<objective>
Create the DESIGN.md and DECISION.md templates that define the structure for spike workspace artifacts.

Purpose: These templates ensure consistent spike documentation. DESIGN.md captures the hypothesis and experiment plan BEFORE execution. DECISION.md captures the outcome AFTER execution. Both templates are used by the spike runner agent and /gsd:spike command.

Output: Two new template files in the kb-templates directory.
</objective>

<execution_context>
@/Users/rookslog/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rookslog/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-spike-runner/03-CONTEXT.md
@.planning/phases/03-spike-runner/03-RESEARCH.md
@.claude/agents/knowledge-store.md
@.claude/agents/kb-templates/signal.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DESIGN.md template</name>
  <files>.claude/agents/kb-templates/spike-design.md</files>
  <action>
Create `.claude/agents/kb-templates/spike-design.md` as the template for spike DESIGN.md files. This is a NEW file (fork constraint: additive only).

The template follows the pattern established by the Phase 1 kb-templates (signal.md, lesson.md) -- YAML frontmatter with placeholder syntax, followed by body template with sections.

**Template content:**

```markdown
---
# Spike Design Template
# Location: .planning/spikes/{index}-{slug}/DESIGN.md

# Required frontmatter
created: {YYYY-MM-DDTHH:MM:SSZ}
status: {designing|building|running|complete|inconclusive}
originating_phase: {phase number|project-level}
depends_on: {spike IDs|none}
round: {1|2}

# Optional frontmatter
time_estimate: {rough estimate}
---

# Spike: {Name}

## Question

{The Open Question being investigated - copy from RESEARCH.md or user input}

## Type

{Binary|Comparative|Exploratory|Open Inquiry}

**Type guidance:**
- Binary: Yes/no feasibility questions with clear threshold
- Comparative: Choose between known options with defined metrics
- Exploratory: Understand a space, learning goals can refine
- Open Inquiry: Flexible structure at Claude's discretion

## Hypothesis

{What we think might be true / what we're testing}

## Success Criteria

{How we'll know if we have an answer - MUST be measurable}

- [ ] Criterion 1: {measurable condition}
- [ ] Criterion 2: {measurable condition}
- [ ] Criterion 3: {measurable condition if needed}

## Experiment Plan

### Experiment 1: {name}

- **What:** {what we'll build/test}
- **Measures:** {what we'll measure}
- **Expected outcome:** {hypothesis for this experiment}

### Experiment 2: {name}

- **What:** {what we'll build/test}
- **Measures:** {what we'll measure}
- **Expected outcome:** {hypothesis for this experiment}

{Add more experiments as needed - keep minimal, 2-3 experiments typical}

## Scope Boundaries

**In scope:**
- {what we'll investigate}
- {what we'll investigate}

**Out of scope:**
- {what we explicitly won't investigate}
- {what we explicitly won't investigate}

## Time Estimate

{Rough estimate - not enforced, for user awareness. Examples: "~1 hour", "~30 minutes", "~2 hours"}

---

## Iteration Log

{Updated by spike-runner agent if iteration occurs}

### Round 1

**Status:** {pending|complete|inconclusive}
**Summary:** {brief outcome}

### Round 2 (if needed)

**Narrowed hypothesis:** {refined question based on Round 1 learnings}
**Status:** {pending|complete|inconclusive}
**Summary:** {brief outcome}
```

**Template notes (add as comment at top):**
- Include all fields for discoverability (Phase 1 decision: templates include all optional fields)
- Use pipe syntax for enum placeholders: {option1|option2}
- DESIGN.md lives in spike workspace (.planning/spikes/{index}-{slug}/), NOT in kb-templates
- This template is for reference; spike-runner and /gsd:spike use it to create DESIGN.md files
  </action>
  <verify>
- File exists at `.claude/agents/kb-templates/spike-design.md`
- Contains YAML frontmatter with status, originating_phase, depends_on, round
- Contains sections: Question, Type, Hypothesis, Success Criteria, Experiment Plan, Scope Boundaries, Time Estimate
- Success Criteria uses checkbox format (measurable)
- Experiment Plan has structured format (What/Measures/Expected outcome)
- Includes Iteration Log section for round tracking
- Uses established template patterns (pipe syntax for enums, placeholder format)
  </verify>
  <done>
A complete DESIGN.md template exists that the spike runner agent and /gsd:spike command can use to create consistent spike designs.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create DECISION.md template</name>
  <files>.claude/agents/kb-templates/spike-decision.md</files>
  <action>
Create `.claude/agents/kb-templates/spike-decision.md` as the template for spike DECISION.md files. This is a NEW file (fork constraint: additive only).

The template follows ADR (Architecture Decision Record) best practices as identified in RESEARCH.md, with mandatory decision field.

**Template content:**

```markdown
---
# Spike Decision Template
# Location: .planning/spikes/{index}-{slug}/DECISION.md

# Required frontmatter
completed: {YYYY-MM-DDTHH:MM:SSZ}
question: {The Open Question - one line}
answer: {One-line decision}
outcome: {confirmed|rejected|partial|inconclusive}
confidence: {HIGH|MEDIUM|LOW}

# Optional frontmatter
originating_phase: {phase number|project-level}
related_requirements: {REQ-IDs if applicable}
spike_duration: {actual time spent}
iterations: {1|2}
---

# Spike Decision: {Name}

## Summary

{2-3 paragraph executive summary. What was the question? What did we learn? What did we decide?}

## Findings

### Experiment 1: {name}

**Result:** {what happened}

**Data:**
{measurements, observations, code output, benchmarks - whatever evidence was gathered}

### Experiment 2: {name}

**Result:** {what happened}

**Data:**
{measurements, observations, code output, benchmarks}

{Add sections for each experiment from DESIGN.md}

## Analysis

{How findings inform the decision. Connect experiment results to the original question.}

| Option | Pros | Cons | Spike Evidence |
|--------|------|------|----------------|
| {Option A} | {benefits} | {drawbacks} | {data from experiments} |
| {Option B} | {benefits} | {drawbacks} | {data from experiments} |

{Table optional for Binary/Exploratory spikes, useful for Comparative}

## Decision

**Chosen approach:** {the decision - REQUIRED, cannot be empty or "TBD"}

**Rationale:** {why, based on evidence from experiments}

**Confidence:** {HIGH|MEDIUM|LOW}

- HIGH: Strong empirical evidence, clear winner
- MEDIUM: Some evidence supports decision, some inference required
- LOW: Limited data, educated guess, or "no clear winner - using default"

## Implications

{What this decision means for downstream work}

- {Implication 1: what changes or actions follow from this decision}
- {Implication 2: any constraints or considerations for future work}
- {Implication 3: risks or tradeoffs accepted}

## Metadata

**Spike duration:** {actual time spent}
**Iterations:** {1 or 2}
**Originating phase:** {phase number or "project-level"}
**Related requirements:** {REQ-IDs if applicable}
**DESIGN.md:** {relative path to DESIGN.md}

---

## KB Entry Reference

{After spike completes, the spike-runner agent creates a KB entry at:}
{~/.claude/gsd-knowledge/spikes/{project}/{spike-name}.md}

{The KB entry contains a condensed version of this decision for cross-project querying.}
```

**Template notes (add as comment at top):**
- DECISION.md is the primary output of a spike - the output is a DECISION, not a report
- "Chosen approach" field is MANDATORY and cannot be "TBD" or deferred
- "No clear winner, using default" IS a valid decision
- ADR-influenced structure: Context (via Summary) -> Options (via Analysis table) -> Decision -> Consequences (via Implications)
- Lives in spike workspace, condensed version persisted to KB
  </action>
  <verify>
- File exists at `.claude/agents/kb-templates/spike-decision.md`
- Contains YAML frontmatter with completed, question, answer, outcome, confidence
- Contains sections: Summary, Findings, Analysis, Decision, Implications, Metadata
- Decision section has mandatory "Chosen approach" field
- Confidence levels documented (HIGH/MEDIUM/LOW)
- Analysis table format for comparative spikes
- Follows ADR-influenced structure
- References KB entry location
  </verify>
  <done>
A complete DECISION.md template exists that ensures every spike produces a documented decision with rationale and evidence.
  </done>
</task>

</tasks>

<verification>
- `.claude/agents/kb-templates/spike-design.md` exists with complete structure
- `.claude/agents/kb-templates/spike-decision.md` exists with complete structure
- Both templates follow established kb-templates patterns
- DESIGN.md template supports iteration tracking (round field, Iteration Log)
- DECISION.md template has mandatory decision field
- Templates align with schemas in CONTEXT.md
</verification>

<success_criteria>
Both spike templates are complete and ready for use by the spike runner agent and /gsd:spike command in Plans 03-04.
</success_criteria>

<output>
After completion, create `.planning/phases/03-spike-runner/03-02-SUMMARY.md`
</output>

# Milestone v1.13: Upstream Sync & Validation

**Status:** SHIPPED 2026-02-11
**Phases:** 7-12
**Total Plans:** 18

## Overview

This milestone synchronizes the fork with 70 upstream GSD commits (v1.11.2 to v1.18.0), adopting the gsd-tools CLI architecture, 11 bug fixes, and 7 features while preserving fork identity and validating gsd-reflect's signal tracking and knowledge base in production. The work is an architectural migration executed as a single merge with staged verification, not traditional feature development.

## Phases

### Phase 7: Fork Strategy & Pre-Merge Setup

**Goal**: The fork has a documented maintenance strategy and a clean branch ready for the upstream merge
**Depends on**: Nothing (first phase of v1.13)
**Requirements**: FORK-01, FORK-02
**Plans**: 2 plans

Plans:
- [x] 07-01-PLAN.md -- Fork strategy & divergence documentation
- [x] 07-02-PLAN.md -- Fix tests & create pre-merge snapshot

**Details:**
Success Criteria:
  1. The "additive only" constraint is formally retired and a tracked-modifications strategy document exists explaining how fork divergences are managed going forward
  2. The upstream reapply-patches mechanism is understood and adopted as the fork's patch preservation approach
  3. A sync branch exists with the current fork state snapshotted (all tests passing) before any merge begins
Completed: 2026-02-10

### Phase 8: Core Merge & Conflict Resolution

**Goal**: All 70 upstream commits are merged into the fork with 12 conflict files correctly resolved, all bug fixes applied, and fork identity preserved
**Depends on**: Phase 7
**Requirements**: MERGE-01 through MERGE-06, FIX-01 through FIX-11
**Plans**: 4 plans

Plans:
- [x] 08-01-PLAN.md -- Pre-flight checks & execute merge
- [x] 08-02-PLAN.md -- Resolve HIGH risk conflicts (package.json, new-project.md) + thin orchestrator adoption
- [x] 08-03-PLAN.md -- Resolve remaining conflicts (.gitignore, README, CHANGELOG, package-lock)
- [x] 08-04-PLAN.md -- Commit merge, validate, ghost cleanup, categorized merge summary

**Details:**
Success Criteria:
  1. All 70 upstream commits are ancestors of the current branch (merge is complete)
  2. The installer displays fork branding while incorporating upstream's JSONC parsing, patch preservation, and statusline reference update
  3. package.json has fork identity with upstream's structural additions
  4. Zero memory system ghost references remain
  5. All 11 upstream bug fixes are present in the merged code
Completed: 2026-02-10

### Phase 9: Architecture Adoption & Verification

**Goal**: The gsd-tools CLI, thin orchestrator pattern, condensed agent specs, and all additive architecture pieces are verified to work with the fork's configuration and features
**Depends on**: Phase 8
**Requirements**: ARCH-01 through ARCH-07
**Plans**: 3 plans

Plans:
- [x] 09-01-PLAN.md -- Comprehensive architecture audit & findings report
- [x] 09-02-PLAN.md -- Fork identity, templates & governance cleanup
- [x] 09-03-PLAN.md -- Thin orchestrator conversion for fork commands

**Details:**
Success Criteria:
  1. gsd-tools.js displays available commands with no arguments
  2. config-set round-trips fork custom fields without data loss
  3. All 6 converted commands delegate to workflows
  4. 34 workflow files, 4 reference files, and 3 summary templates present
Completed: 2026-02-10

### Phase 10: Upstream Feature Verification

**Goal**: All 7 adopted upstream features function correctly within the fork context
**Depends on**: Phase 9
**Requirements**: FEAT-01 through FEAT-07
**Plans**: 3 plans

Plans:
- [x] 10-01-PLAN.md -- Fix --auto fork config + verify config persistence (FEAT-02, FEAT-07)
- [x] 10-02-PLAN.md -- Verify install features: reapply-patches, update detection, JSONC (FEAT-01, FEAT-05, FEAT-06)
- [x] 10-03-PLAN.md -- Verify gsd-tools.js features + final branding sweep (FEAT-03, FEAT-04)

**Details:**
Success Criteria:
  1. reapply-patches correctly detects, backs up, and restores local patches
  2. --auto flag enables unattended project initialization
  3. --include flag eliminates redundant file reads
  4. Update command detects local vs global install correctly
  5. Research decision persists to config.json
Completed: 2026-02-11

### Phase 11: Test Suite Repair & CI/CD Validation

**Goal**: All test suites pass and CI/CD pipelines are fully functional after the architectural migration
**Depends on**: Phase 10
**Requirements**: TEST-01 through TEST-05
**Plans**: 3 plans

Plans:
- [x] 11-01-PLAN.md -- Extend wiring validation for thin orchestrator delegation
- [x] 11-02-PLAN.md -- Fork-specific gsd-tools config tests
- [x] 11-03-PLAN.md -- CI workflow updates and full validation run

**Details:**
Success Criteria:
  1. Fork vitest passes all tests including updated wiring validation and install tests
  2. Upstream gsd-tools tests pass (75 tests)
  3. All three CI/CD workflows functional
  4. Wiring validation validates thin orchestrator pattern
Completed: 2026-02-11

### Phase 12: Release & Dogfooding

**Goal**: v1.13.0 is versioned and released, with gsd-reflect's signal tracking and knowledge base validated through production use during this milestone
**Depends on**: Phase 11
**Requirements**: DOG-01 through DOG-04
**Plans**: 3 plans

Plans:
- [x] 12-01-PLAN.md -- Signal collection from Phases 8-11 with user review gate
- [x] 12-02-PLAN.md -- Lesson generation, reflection, and KB comparison document
- [x] 12-03-PLAN.md -- Version bump, changelog, tag, and PR to main

**Details:**
Success Criteria:
  1. Signal entries exist capturing merge decisions and architecture adoption experiences
  2. Knowledge base lessons generated including upstream sync lesson
  3. /gsd:reflect produces a reflection report with actionable insights
  4. Documented KB comparison (file-based vs MCP Memory)
  5. Version set to 1.13.0 across all locations
Completed: 2026-02-11

---

## Milestone Summary

**Key Decisions:**
- Tracked-modifications replaces additive-only fork strategy (FORK-STRATEGY.md governs all merges)
- Traditional merge over rebase for 70-commit sync (single merge commit f97291a)
- Adopt gsd-tools.js as-is, no fork modifications (separate gsd-reflect-tools.js for fork CLI)
- Thin orchestrator pattern for all 29 fork-applicable commands
- GitHub Discussions as fork community link (replaced join-discord)
- File-based KB validated over upstream's reverted MCP Memory approach

**Issues Resolved:**
- Signal pipeline unexercised (v1.12 tech debt) — resolved by dogfooding 13 signals
- Command location inconsistency (v1.12 tech debt) — resolved by thin orchestrator adoption
- Milestone reflection unwired (v1.12 tech debt) — resolved by Phase 12 reflection
- Knowledge surfacing unexercised in production (v1.12 tech debt) — resolved by dogfooding 3 lessons

**Issues Deferred:**
- NPM_TOKEN config (pre-existing from v1.12)
- Gitignore friction (pre-existing from v1.12)

**Technical Debt Incurred:**
- No new technical debt from v1.13

---

_For current project status, see .planning/ROADMAP.md_

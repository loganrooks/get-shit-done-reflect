---
milestone: v1.14
audited: 2026-02-15T11:30:00Z
status: tech_debt
scores:
  requirements: 29/29
  phases: 9/9
  integration: 8/8
  flows: 5/5
gaps:
  requirements: []
  integration: []
  flows: []
tech_debt:
  - phase: 21-workflow-refinements
    items:
      - "2 failing unit tests: install.test.js lines 410-427 expect KB paths in signal workflow, but workflow was reduced to thin redirect (Phase 21-01). Tests should check commands/gsd/signal.md instead."
  - phase: 16-cross-runtime-handoff-signal-enrichment
    items:
      - "Human verification: Cross-runtime pause/resume not tested E2E across actual runtimes"
      - "Human verification: Signal runtime provenance not tested with real multi-runtime workflow"
      - "Human verification: Capability gap logging not tested in actual degraded runtime"
      - "Human verification: Backward compatibility with old-format .continue-here.md files"
  - phase: 19-kb-infrastructure-data-safety
    items:
      - "Human verification: Fresh install KB script copying not tested on real target machine"
      - "Human verification: Migration backup not tested with real existing KB data"
      - "Human verification: Provenance field population not tested via actual LLM agent execution"
  - phase: 17-validation-release
    items:
      - "4 pre-existing skipped E2E tests requiring real agent interaction (unrelated to v1.14)"
---

# v1.14 Multi-Runtime Interop — Milestone Audit

**Milestone Goal:** Make GSD a truly runtime-agnostic system where users can seamlessly switch between Claude Code, OpenAI Codex CLI, and other supported runtimes mid-work, with shared project state and knowledge base.

**Audited:** 2026-02-15
**Status:** tech_debt (no blockers, accumulated deferred items)

## Scores

| Category | Score | Details |
|----------|-------|---------|
| Requirements | 29/29 | All v1.14 requirements satisfied |
| Phases | 9/9 | All phases verified and passing (5 planned + 4 gap closure) |
| Integration | 8/8 | All cross-phase wiring points connected |
| E2E Flows | 5/5 | All user flows complete end-to-end |
| Tests | 153/159 | 2 failing (test expectations), 4 skipped (pre-existing) |

## Requirements Coverage

### Runtime Abstraction (Phase 13) — 4/4

| Requirement | Status | Evidence |
|-------------|--------|----------|
| ABST-01: Installer splits 313+ ~/.claude/ paths into runtime-specific vs shared | SATISFIED | Two-pass replacePathsInContent() categorizes KB as shared, rest as runtime-specific |
| ABST-02: Runtime capability matrix exists as first-class artifact | SATISFIED | capability-matrix.md with 4 capabilities across 4 runtimes |
| ABST-03: Agent specs use feature detection not runtime detection | SATISFIED | has_capability() in workflows, zero runtime name checks |
| ABST-04: Degraded behavior documented per runtime | SATISFIED | Degraded Behavior Summary for all 4 runtimes |

### Knowledge Base Migration (Phase 14) — 6/6

| Requirement | Status | Evidence |
|-------------|--------|----------|
| KB-01: KB migrated to ~/.gsd/knowledge/ | SATISFIED | migrateKB() implements copy-then-symlink with entry count verification |
| KB-02: Installer creates ~/.gsd/knowledge/ structure | SATISFIED | Creates signals/, spikes/, lessons/ subdirectories |
| KB-03: Backward-compatible symlink bridge | SATISFIED | Symlink at old path, Claude-runtime-only creation |
| KB-04: Automated migration with zero data loss | SATISFIED | Copy, count verify, backup, symlink pattern |
| KB-05: GSD_HOME env var override | SATISFIED | getGsdHome() checks process.env.GSD_HOME |
| KB-06: All 20+ files updated to ~/.gsd/knowledge/ | SATISFIED | 54 references across 18 source files |

### Codex CLI Integration (Phase 15) — 7/7

| Requirement | Status | Evidence |
|-------------|--------|----------|
| CODEX-01: --codex installs as Codex Skills | SATISFIED | copyCodexSkills() creates directory-per-skill SKILL.md structure |
| CODEX-02: Generates ~/.codex/AGENTS.md | SATISFIED | generateCodexAgentsMd() with GSD markers and capability docs |
| CODEX-03: Reference docs to ~/.codex/get-shit-done/ | SATISFIED | copyWithPathReplacement() installs reference docs |
| CODEX-04: Path replacement ~/.claude/ to ~/.codex/ | SATISFIED | replacePathsInContent() with codex pathPrefix |
| CODEX-05: --all includes Codex as 4th runtime | SATISFIED | selectedRuntimes = ['claude', 'opencode', 'gemini', 'codex'] |
| CODEX-06: Codex limitations documented | SATISFIED | AGENTS.md lists no Task tool, no hooks, no tool restrictions |
| CODEX-07: codex exec non-interactive mode | SATISFIED | AGENTS.md includes Non-interactive Usage section |

### Cross-Runtime Handoff & Signal Enrichment (Phase 16) — 8/8

| Requirement | Status | Evidence |
|-------------|--------|----------|
| HAND-01: Pause in Claude Code, resume in Codex CLI | SATISFIED | Semantic .continue-here.md + detect_runtime in resume workflow |
| HAND-02: .continue-here.md stores semantic state | SATISFIED | Template guideline prohibits commands; pause-work enforces semantic-only |
| HAND-03: Resume detects runtime, renders appropriate commands | SATISFIED | detect_runtime maps path prefix to command syntax |
| HAND-04: Zero runtime-specific hardcoded paths in .planning/ | SATISFIED | Template audit confirmed clean |
| SIG-01: Signal entries include runtime: field | SATISFIED | Signal template line 14, collector Step 3.0 |
| SIG-02: Signal entries include model: field | SATISFIED | Signal template line 15, collector Step 3.0 |
| SIG-03: Signal template updated with context fields | SATISFIED | Template has runtime/model; capability-gap added to signal_type |
| SIG-04: Capability gap events logged as signals | SATISFIED | execute-phase.md logs trace-severity capability-gap in Else branches |

### Validation & Release (Phase 17) — 4/4

| Requirement | Status | Evidence |
|-------------|--------|----------|
| VALID-01: OpenCode installation verified | SATISFIED | 4 tests in multi-runtime.test.js |
| VALID-02: Gemini CLI installation verified | SATISFIED | 4 tests in multi-runtime.test.js |
| VALID-03: --all multi-runtime install verified | SATISFIED | 5 tests in multi-runtime.test.js |
| VALID-04: KB accessible from all runtimes | SATISFIED | 9 tests in cross-runtime-kb.test.js |

**Score: 29/29 requirements satisfied**

## Phase Verifications

All 9 phases passed verification.

| Phase | Score | Requirements | Anti-Patterns | Verified |
|-------|-------|-------------|---------------|----------|
| 13: Path Abstraction & Capability Matrix | 11/11 | ABST-01..04 (4/4) | None | 2026-02-11 |
| 14: Knowledge Base Migration | 11/11 | KB-01..06 (6/6) | None | 2026-02-11 |
| 15: Codex CLI Integration | 10/10 | CODEX-01..07 (7/7) | None | 2026-02-11 |
| 16: Cross-Runtime Handoff & Signal Enrichment | 11/11 | HAND-01..04, SIG-01..04 (8/8) | None | 2026-02-11 |
| 17: Validation & Release | 11/11 | VALID-01..04 (4/4) | None | 2026-02-11 |
| 18: Capability Matrix & Installer Corrections | 10/10 | Gaps 1-4 (4/4) | None | 2026-02-14 |
| 19: KB Infrastructure & Data Safety | 7/7 | Gaps 5-6, 13-14 (4/4) | None | 2026-02-14 |
| 20: Runtime Portability | 7/7 | Gaps 7-9 (3/3) | None | 2026-02-14 |
| 21: Workflow Refinements | 8/8 | Gaps 10-12 (3/3) | None | 2026-02-15 |

**Score: 9/9 phases passed | 82/82 must-haves verified across all phases**

## Gap Closure (Phases 18-21)

Phases 18-21 addressed 14 gaps identified in post-v1.14 analysis:

| Gap | Description | Phase | Status |
|-----|-------------|-------|--------|
| 1 | Codex mcp_servers stale (was N, should be Y) | 18 | Closed |
| 2 | Gemini mcp_servers stale (was N, should be Y) | 18 | Closed |
| 3 | Gemini tool_permissions stale (was N, should be Y) | 18 | Closed |
| 4 | Gemini task_tool needs annotation (experimental) | 18 | Closed |
| 5 | KB scripts at wrong location | 19 | Closed |
| 6 | No pre-migration backup | 19 | Closed |
| 7 | Gemini agent body text uses Claude tool names | 20 | Closed |
| 8 | MCP tools stripped from Gemini agents | 18, 20 | Closed |
| 9 | Codex MCP config.toml not generated | 20 | Closed |
| 10 | Signal command context bloat (888 lines) | 21 | Closed |
| 11 | Spike template lacks feasibility section | 21 | Closed |
| 12 | Spike workflow lacks research-first gate | 21 | Closed |
| 13 | Missing gsd_version in KB entries | 19 | Closed |
| 14 | Spikes/lessons lack runtime/model fields | 19 | Closed |

**Score: 14/14 gaps closed**

## Cross-Phase Integration

Integration checker verified all 8 cross-phase wiring points:

| Integration Point | From | To | Status |
|-------------------|------|-----|--------|
| Path abstraction handles KB paths | Phase 13 | Phase 14 | Connected |
| KB at shared location accessible by Codex | Phase 14 | Phase 15 | Connected |
| Codex runtime detected in resume workflow | Phase 15 | Phase 16 | Connected |
| Signal enrichment fields tested cross-runtime | Phase 16 | Phase 17 | Connected |
| Capability matrix corrections consistent with feature detection | Phase 13 | Phase 18 | Connected |
| KB scripts installed alongside migration | Phase 14 | Phase 19 | Connected |
| MCP preservation works in both tools and body text | Phase 18 | Phase 20 | Connected |
| Codex MCP config consistent with skill conversion | Phase 20 | Phase 15 | Connected |

**Score: 8/8 integration points connected | 0 orphaned exports | 0 broken links**

## E2E User Flows

| Flow | Description | Status | Verification |
|------|-------------|--------|-------------|
| 1 | Fresh multi-runtime install (--all, 4 runtimes) | Complete | 16 integration tests |
| 2 | Cross-runtime pause/resume (Claude to Codex) | Complete | Source + doc verification |
| 3 | Cross-runtime signal creation (shared KB) | Complete | 9 integration tests |
| 4 | Signal command efficiency (<200 lines context) | Complete | 133 lines actual (85% reduction) |
| 5 | Spike with feasibility gate (advisory + prerequisites) | Complete | Source verification |

**Score: 5/5 flows verified**

## Test Suite

| Metric | Value |
|--------|-------|
| Total tests | 159 |
| Passing | 153 |
| Failing | 2 |
| Skipped | 4 |
| Pass rate | 96.2% |

**Failing tests (2):** Both in `tests/unit/install.test.js` (lines 410-427) — expect KB paths (`~/.gsd/knowledge`) in signal workflow file, but Phase 21-01 reduced the workflow to a 21-line thin redirect. The KB paths now live in `commands/gsd/signal.md`. This is a test expectation issue, not a functional break.

**Skipped tests (4):** Pre-existing E2E tests requiring real agent interaction — unrelated to v1.14.

**Test growth:** 105 (pre-v1.14 baseline) -> 159 (post-v1.14) = +54 tests added across milestone

## Tech Debt Summary

### Critical Blockers: 0

### Non-Critical Items

**Test maintenance (1 item, actionable):**
- 2 failing unit tests need expectation update: signal workflow is now a thin redirect, tests should check `commands/gsd/signal.md` instead of `workflows/signal.md`

**Human verification backlog (7 items, informational):**
- Cross-runtime pause/resume E2E across actual runtimes (Phase 16)
- Signal runtime provenance with real multi-runtime workflow (Phase 16)
- Capability gap logging in actual degraded runtime (Phase 16)
- Backward compatibility with old .continue-here.md format (Phase 16)
- Fresh install KB script copying on real target machine (Phase 19)
- Migration backup with real existing KB data (Phase 19)
- Provenance field population via actual LLM agent execution (Phase 19)

**Pre-existing (carried from v1.13):**
- NPM_TOKEN config for CI publishing
- Gitignore friction with .planning/ files
- 4 skipped E2E tests requiring real agent interaction

## Milestone Statistics

| Metric | Value |
|--------|-------|
| Phases | 9 (5 planned + 4 gap closure) |
| Plans executed | 18 |
| Requirements satisfied | 29/29 |
| Gaps closed | 14/14 |
| Must-haves verified | 82/82 |
| Tests added | +54 (105 to 159) |
| Anti-patterns found | 0 |
| Duration | 2026-02-11 to 2026-02-15 (5 days) |

---

_Audited: 2026-02-15_
_Auditor: Claude (audit-milestone workflow)_

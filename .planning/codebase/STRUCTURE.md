# Codebase Structure

**Analysis Date:** 2026-02-02

## Directory Layout

```
get-shit-done-reflect/
├── bin/                    # Installation and setup
│   └── install.js          # Multi-runtime installer (Claude Code, OpenCode, Gemini)
├── scripts/                # Build and utility scripts
│   └── build-hooks.js      # Copy hooks to dist/ for bundling
├── hooks/                  # Runtime hooks (auto-loaded by Claude Code)
│   ├── gsd-statusline.js   # Status bar display hook
│   ├── gsd-check-update.js # Update checking hook
│   └── dist/               # Bundled hooks (generated by build-hooks.js)
├── commands/               # User-facing slash commands
│   └── gsd/                # GSD command directory
│       ├── new-project.md           # Initialize project
│       ├── map-codebase.md          # Analyze existing codebase
│       ├── discuss-phase.md         # Capture phase vision
│       ├── plan-phase.md            # Create execution plans
│       ├── execute-phase.md         # Execute phase plans
│       ├── verify-work.md           # User acceptance testing
│       ├── quick.md                 # Ad-hoc task execution
│       ├── add-phase.md             # Add new phase
│       ├── insert-phase.md          # Insert urgent phase
│       ├── remove-phase.md          # Remove future phase
│       ├── new-milestone.md         # Start milestone
│       ├── complete-milestone.md    # Archive milestone
│       ├── audit-milestone.md       # Verify milestone completion
│       ├── plan-milestone-gaps.md   # Create gap-closure phases
│       ├── progress.md              # Show current position
│       ├── resume-work.md           # Resume from session
│       ├── pause-work.md            # Create handoff
│       ├── add-todo.md              # Capture idea
│       ├── check-todos.md           # List and work on todos
│       ├── debug.md                 # Systematic debugging
│       ├── settings.md              # Configure workflow
│       ├── set-profile.md           # Switch model profile
│       ├── update.md                # Update GSD
│       ├── help.md                  # Show command reference
│       └── join-discord.md          # Community link
├── agents/                 # Specialized Claude agent definitions
│   ├── gsd-codebase-mapper.md      # Analyze codebase (parallel explorers)
│   ├── gsd-project-researcher.md   # Research domain and features
│   ├── gsd-planner.md              # Create execution plans
│   ├── gsd-plan-checker.md         # Verify plans achieve goals
│   ├── gsd-executor.md             # Execute PLAN.md atomically
│   ├── gsd-verifier.md             # Verify phase completion
│   ├── gsd-debugger.md             # Debug issues systematically
│   ├── gsd-phase-researcher.md     # Phase-specific research
│   ├── gsd-research-synthesizer.md # Combine research findings
│   ├── gsd-roadmapper.md           # Create phase roadmaps
│   ├── gsd-integration-checker.md  # Verify cross-phase wiring
│   └── gsd-plan-verifier.md        # Plan verification logic
├── get-shit-done/          # Reference knowledge base (loaded by commands/agents)
│   ├── references/         # Deep guidance documents
│   │   ├── checkpoints.md          # Checkpoint protocols and gates
│   │   ├── continuation-format.md  # Resume session format
│   │   ├── git-integration.md      # Git workflow and commit patterns
│   │   ├── model-profiles.md       # Quality/balanced/budget profile configs
│   │   ├── planning-config.md      # .planning/config.json options
│   │   ├── questioning.md          # Question frameworks
│   │   ├── tdd.md                  # TDD plan structure
│   │   ├── ui-brand.md             # Visual patterns, status symbols
│   │   └── verification-patterns.md # Verification criteria patterns
│   ├── templates/          # Reusable output structures
│   │   ├── project.md              # PROJECT.md template
│   │   ├── requirements.md         # REQUIREMENTS.md template
│   │   ├── roadmap.md              # ROADMAP.md template
│   │   ├── state.md                # STATE.md template
│   │   ├── context.md              # CONTEXT.md template (phase vision)
│   │   ├── research.md             # RESEARCH.md template
│   │   ├── phase-prompt.md         # Phase execution prompt template
│   │   ├── planner-subagent-prompt.md # Planner agent prompt
│   │   ├── summary.md              # SUMMARY.md execution output
│   │   ├── verification-report.md  # Phase verification report
│   │   ├── DEBUG.md                # DEBUG.md debug session template
│   │   ├── UAT.md                  # UAT.md user acceptance test
│   │   ├── continue-here.md        # Continuation file on pause
│   │   ├── milestone.md            # MILESTONE.md template
│   │   ├── milestone-archive.md    # Archived milestone template
│   │   ├── debug-subagent-prompt.md # Debug agent prompt
│   │   ├── config.json             # Default .planning/config.json
│   │   ├── user-setup.md           # Installation and setup guide
│   │   ├── codebase/               # Codebase mapping templates
│   │   │   ├── stack.md            # Technology stack template
│   │   │   ├── architecture.md     # Architecture template
│   │   │   ├── structure.md        # Directory structure template
│   │   │   ├── conventions.md      # Coding conventions template
│   │   │   ├── testing.md          # Testing patterns template
│   │   │   ├── integrations.md     # External integrations template
│   │   │   └── concerns.md         # Technical debt template
│   │   └── research-project/       # Research output templates
│   │       ├── STACK.md            # Research findings: stack
│   │       ├── ARCHITECTURE.md     # Research findings: patterns
│   │       ├── FEATURES.md         # Research findings: features
│   │       ├── PITFALLS.md         # Research findings: anti-patterns
│   │       └── SUMMARY.md          # Research findings: summary
│   └── workflows/          # Orchestration procedures
│       ├── discovery-phase.md      # Project discovery questioning
│       ├── discuss-phase.md        # Phase vision capture
│       ├── execute-phase.md        # Multi-plan execution orchestrator
│       ├── execute-plan.md         # Single plan execution
│       ├── verify-phase.md         # Phase goal verification
│       ├── verify-work.md          # UAT with user interaction
│       ├── complete-milestone.md   # Milestone completion
│       ├── map-codebase.md         # Codebase analysis orchestrator
│       ├── diagnose-issues.md      # Failure diagnosis
│       ├── list-phase-assumptions.md # Show intended approach
│       ├── research-phase.md       # Phase-specific research
│       ├── resume-project.md       # Session restoration
│       └── transition.md           # Workflow transitions
├── .planning/              # Project artifacts (generated per-project)
│   ├── config.json         # Workflow settings (depth, mode, profile)
│   ├── PROJECT.md          # Project vision and scope
│   ├── REQUIREMENTS.md     # Scoped v1/v2/out-of-scope reqs
│   ├── ROADMAP.md          # Phase breakdown
│   ├── STATE.md            # Living project memory
│   ├── MILESTONES.md       # Completed milestones index
│   ├── codebase/           # Brownfield analysis
│   │   ├── STACK.md        # Technology stack
│   │   ├── ARCHITECTURE.md # Architecture patterns
│   │   ├── STRUCTURE.md    # Directory layout
│   │   ├── CONVENTIONS.md  # Coding standards
│   │   ├── TESTING.md      # Test patterns
│   │   ├── INTEGRATIONS.md # External services
│   │   └── CONCERNS.md     # Technical debt
│   ├── research/           # Project-level research
│   │   ├── STACK.md        # Ecosystem findings
│   │   ├── ARCHITECTURE.md # Pattern findings
│   │   ├── FEATURES.md     # Feature research
│   │   ├── PITFALLS.md     # Known issues
│   │   └── SUMMARY.md      # Research summary
│   ├── phases/             # Phase execution artifacts
│   │   ├── 01-name/
│   │   │   ├── 01-01-PLAN.md       # Execution plan
│   │   │   ├── 01-01-SUMMARY.md    # Execution results
│   │   │   ├── 01-02-PLAN.md
│   │   │   └── 01-02-SUMMARY.md
│   │   └── 02-name/
│   │       └── ...
│   ├── quick/              # Ad-hoc task execution
│   │   ├── 001-task-slug/
│   │   │   ├── PLAN.md     # Task plan
│   │   │   └── SUMMARY.md  # Task results
│   │   └── 002-task-slug/
│   │       └── ...
│   ├── todos/              # Captured ideas
│   │   ├── pending/        # Awaiting work
│   │   │   └── NNNN-slug.md
│   │   └── done/           # Completed
│   │       └── NNNN-slug.md
│   ├── debug/              # Debug sessions
│   │   ├── active/         # In-progress
│   │   │   └── slug.md
│   │   └── resolved/       # Archived
│   │       └── slug.md
│   └── milestones/         # Archived milestones
│       └── 1.0.0/
│           ├── ROADMAP.md
│           ├── REQUIREMENTS.md
│           └── phases/
├── .claude/                # Local Claude Code config (symlinked on install)
│   ├── commands/gsd/       # Copy of commands/gsd/
│   ├── agents/gsd-*.md     # Copy of agents/
│   ├── get-shit-done/      # Copy of reference knowledge base
│   ├── hooks/              # Copy of bundled hooks
│   └── settings.json       # User settings with hook registration
├── .opencode/              # Local OpenCode config (on local install)
│   └── command/gsd-*.md    # Flattened commands
├── .gitignore              # Git ignore patterns
├── package.json            # npm metadata
├── package-lock.json       # Dependency lock
├── README.md               # User documentation
├── GSD-STYLE.md            # Contributing guide
├── CHANGELOG.md            # Version history
├── CONTRIBUTING.md         # Contribution guidelines
├── LICENSE                 # MIT license
├── MAINTAINERS.md          # Maintainer list
└── assets/                 # Images and logos
    ├── gsd-logo-2000.png
    ├── gsd-logo-2000.svg
    └── terminal.svg
```

## Directory Purposes

**`bin/`:**
- Purpose: Installation entry point and multi-runtime configuration
- Contains: `install.js` - handles interactive/non-interactive install, uninstall, runtime selection (Claude/OpenCode/Gemini)
- Key files: `install.js` (1500+ lines, path expansion, frontmatter conversion, hook registration)

**`scripts/`:**
- Purpose: Build automation
- Contains: `build-hooks.js` - copies hooks from source to `hooks/dist/` for npm bundling
- Key files: `build-hooks.js` (simple file copier for prepublishOnly)

**`hooks/`:**
- Purpose: Background tasks run by Claude Code on session start
- Contains: `gsd-statusline.js`, `gsd-check-update.js` source and bundled `dist/` versions
- Key files: Status display, version checking (loaded via settings.json hooks)

**`commands/gsd/`:**
- Purpose: User-facing slash command definitions
- Contains: 27+ markdown files defining `/gsd:command-name` commands
- Key files:
  - `new-project.md` - Project initialization orchestrator
  - `map-codebase.md` - Brownfield analysis entry point
  - `plan-phase.md` - Plan creation orchestrator
  - `execute-phase.md` - Execution orchestrator
  - All delegate to workflows in `get-shit-done/workflows/`

**`agents/`:**
- Purpose: Specialized Claude instances with restricted tool access
- Contains: 12+ agent definitions with YAML metadata and execution procedures
- Key files:
  - `gsd-executor.md` - Executes PLAN.md files atomically
  - `gsd-planner.md` - Creates detailed task plans
  - `gsd-verifier.md` - Verifies phase completion
  - Each spawned by workflows via Task tool

**`get-shit-done/references/`:**
- Purpose: Reusable decision-making and pattern guides
- Contains: 9 markdown files providing decision frameworks and patterns
- Key files:
  - `git-integration.md` - Commit conventions, branching strategies
  - `checkpoints.md` - Checkpoint protocols (human-verify, decision gates)
  - `verification-patterns.md` - How to write verification criteria
  - @-referenced by commands/agents when detailed guidance needed

**`get-shit-done/templates/`:**
- Purpose: Reusable artifact structures for output files
- Contains: 26+ markdown and JSON templates
- Key files:
  - `project.md` - PROJECT.md structure
  - `roadmap.md` - ROADMAP.md structure
  - `codebase/*.md` - Codebase mapping output templates (STACK.md, ARCHITECTURE.md, etc.)
  - Filled by agents to create `.planning/` artifacts

**`get-shit-done/workflows/`:**
- Purpose: Orchestration procedures and decision trees
- Contains: 13+ markdown files defining multi-step processes
- Key files:
  - `execute-phase.md` - Groups plans into waves, spawns executors in parallel
  - `discovery-phase.md` - Questioning framework for project/milestone initialization
  - `map-codebase.md` - Orchestrates parallel codebase explorers
  - Loaded by commands, can call other workflows

## Key File Locations

**Entry Points:**

- **Installation:** `bin/install.js` - Run via `npx get-shit-done-cc`
- **CLI Commands:** `commands/gsd/*.md` - Invoked as `/gsd:command-name`
- **Project Init:** `commands/gsd/new-project.md` - First command in new project
- **Brownfield:** `commands/gsd/map-codebase.md` - Run first on existing codebases

**Configuration:**

- **Install Config:** `bin/install.js` (lines 42-143) - getDirName, getGlobalDir functions
- **Workflow Config:** `get-shit-done/templates/config.json` - Default .planning/config.json
- **Frontmatter Conversion:** `bin/install.js` (lines 287-437) - Tool/command name mapping per runtime

**Core Logic:**

- **Execution Orchestration:** `get-shit-done/workflows/execute-phase.md` - Wave grouping, plan discovery, executor spawning
- **Plan Execution:** `agents/gsd-executor.md` - Task execution, per-task commits, SUMMARY.md creation
- **Verification:** `agents/gsd-verifier.md` - Phase goal verification, gap detection
- **State Management:** `.planning/STATE.md` (template: `get-shit-done/templates/state.md`)

**Testing & Verification:**

- **Checkpoint Patterns:** `get-shit-done/references/checkpoints.md` - Human-verify and decision checkpoint definitions
- **Verification Patterns:** `get-shit-done/references/verification-patterns.md` - How to write verify/done criteria
- **TDD:** `get-shit-done/references/tdd.md` - TDD plan structure and commit conventions

## Naming Conventions

**Files:**
- Kebab-case: `execute-phase.md`, `gsd-check-update.js`
- Uppercase MARKDOWN: `PROJECT.md`, `ROADMAP.md`, `STATE.md`, `.planning/` artifacts
- Template references: `[Placeholder]` for variables, `{phase}-{plan}` for computed values

**Directories:**
- Kebab-case for organizational dirs: `get-shit-done/`, `commands/gsd/`
- Uppercase + hyphen for phase dirs: `01-foundation/`, `02-core-features/`
- Numeric prefixes: `001-slug/`, `002-slug/` for quick tasks and todos

**Commands:**
- Slash command format: `/gsd:command-name`
- Flattened for OpenCode: `/gsd-command-name`
- Agent naming: `gsd-agent-purpose.md`

**Bash Variables (in workflows):**
- CAPS_UNDERSCORES: `PLAN_START_TIME`, `COMMIT_PLANNING_DOCS`, `MODEL_PROFILE`

**XML Attributes:**
- snake_case: `type="checkpoint:human-verify"`, `wave="1"`, `depends_on="01-01"`

## Where to Add New Code

**New Command:**
- File: `commands/gsd/new-command.md`
- Template: YAML frontmatter + `<objective>` + delegation to workflow
- Follow GSD-STYLE.md for tag conventions (no generic `<section>`, use semantic tags)

**New Workflow:**
- File: `get-shit-done/workflows/process-name.md`
- Structure: `<purpose>`, `<process>`, `<step>` elements
- Remember: Workflows orchestrate; agents execute. Keep workflows lean.

**New Agent:**
- File: `agents/gsd-agent-purpose.md`
- Template: YAML frontmatter (tools, color) + `<role>` + execution steps
- Add to `bin/install.js` copy logic and conversion handling

**New Template:**
- File: `get-shit-done/templates/artifact-name.md`
- Purpose: Provide reusable structure for agents to fill
- Use `[Placeholder]` for variable content

**New Reference:**
- File: `get-shit-done/references/concept-name.md`
- Purpose: Deep guidance for decisions, patterns, principles
- @-referenced by commands/agents when detailed explanation needed

**New Hook:**
- File: `hooks/gsd-hook-purpose.js`
- Register in `bin/install.js` (add to HOOKS_TO_COPY array, line 13)
- Register in settings.json via hook function (line 1239-1260)

## Special Directories

**`.planning/`:**
- Purpose: Project artifacts (generated by GSD commands)
- Generated: Yes - created by `/gsd:new-project`, `/gsd:plan-phase`, etc.
- Committed: Yes (default) - controlled by `config.json` `commit_docs` setting
- Structure: Mirrors template structure in `get-shit-done/templates/`

**`hooks/dist/`:**
- Purpose: Bundled hooks for npm distribution
- Generated: Yes - by `npm run build:hooks` (prepublishOnly hook)
- Committed: No - regenerated from source before publish
- Content: Copy of source hooks ready for installation

**`assets/`:**
- Purpose: Images and branding
- Generated: No
- Committed: Yes
- Usage: README.md logo references

**`.claude/`, `.opencode/`, `.gemini/`:**
- Purpose: Runtime-specific configuration (user's machine, not repo)
- Generated: Yes - by `bin/install.js` on first install
- Committed: No - in .gitignore, per-user config
- Content: Copy of commands/, agents/, get-shit-done/, hooks/ with path adjustments

---

*Structure analysis: 2026-02-02*
